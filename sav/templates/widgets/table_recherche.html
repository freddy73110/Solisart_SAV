{% load static %}
{% load my_filter %}
    <meta charset="UTF-8">
        <!-- for jquery -->
    <script src="{% static 'jquery/jquery-3.4.1.min.js' %}"></script>
    <script src="{% static 'jquery/jquery-ui-1.12.1/jquery-ui.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'jquery/jquery-ui-1.12.1/jquery-ui.css' %}">

<link rel="stylesheet" type="text/css" href="{% static 'bootstrap-table-master/dist/bootstrap-table.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap-table-master/dist/extensions/reorder-rows/bootstrap-table-reorder-rows.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap-table-master/dist/extensions/fixed-columns/bootstrap-table-fixed-columns.min.css' %}">
    <script src="{% static 'bootstrap-table-master/dist/bootstrap-table.min.js' %}"></script>
    <script src="{% static 'bootstrap-table-master/tableExport.min.js' %}"></script>
    <script src="{% static 'bootstrap-table-master/dist/extensions/export/bootstrap-table-export.min.js' %}"></script>
    <script src="{% static 'bootstrap-table-master/dist/extensions/filter-control/bootstrap-table-filter-control.min.js' %}"></script>
    <script src="{% static 'bootstrap-table-master/dist/extensions/reorder-rows/bootstrap-table-reorder-rows.min.js' %}"></script>
    <script src="{% static 'bootstrap-table-master/dist/extensions/fixed-columns/bootstrap-table-fixed-columns.min.js' %}"></script>
    <script src="{% static 'bootstrap-table-master/ajax_lib/jquery.tablednd.min.js' %}"></script>
<h2>Utilisateur{% if utilisateurs|length > 1 %}s{%endif%}</h2>
<table id="utilisateur"
        data-toggle="table"
        data-search="true"
        data-show-columns="true"
        data-show-columns-toggle-all="true"
        data-show-refresh="false"
        data-show-fullscreen="true"
        data-show-export="true"
        data-page-list="[10, 25, 50, 100, all]"
        data-pagination="true"
        data-filter-control="true"
        data-show-search-clear-button="true">
    <thead>
        <th>Prenom</th>
        <th>Nom</th>
        <th>adresse mail</th>
        <th>Téléphone 1</th>
        <th>Téléphone 2</th>
    </thead>
    <tbody>
        {% for u in utilisateurs %}
        <tr>
            <td><a href="{% url 'sav:utilisateur' pk=u.id%}" target="_blank">{{u.first_name}}</a></td>
            <td><a href="{% url 'sav:utilisateur' pk=u.id%}" target="_blank">{{u.last_name}}</a></td>
            <td>{{u.email}}</td>
            <td>{{u.profil_user.telephone1|format_tel}}</td>
            <td>{{u.profil_user.telephone2|format_tel}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<h2>Installation{% if table|length > 1 %}s{%endif%}</h2>
<table
        id="installation"
        data-toolbar="#toolbar"
        data-toggle="table"
        data-search="true"
        data-show-columns="true"
        data-show-columns-toggle-all="true"
        data-show-refresh="false"
        data-show-fullscreen="true"
        data-show-export="true"
        data-page-list="[10, 25, 50, 100, all]"
        data-pagination="true"
        data-filter-control="true"
        data-show-search-clear-button="true">
    <thead>
        <th>ID SA</th>
        <th>Type communication</th>
        <th>Version carte firmware</th>
        <th>version carte interface</th>
        <th>Utilisateurs</th>
    </thead>
    <tbody>
        {% for i in table %}
        <tr>
            <td><a href="{% url 'sav:installation' i.id %}" target="_blank">{{i.idsa}}</a></td>
            <td>{{i.type_communication}}</td>
            <td>{{i.version_carte_firmware}}</td>
            <td>{{i.version_carte_interface}}</td>
            <td>
                {% for u in i.user_acces %}
                <li><a href="{% url 'sav:utilisateur' pk=u.utilisateur.id%}" target="_blank">{{u.utilisateur.profil_user.icon|safe}} {{u.utilisateur}} {{u.utilisateur.profil_user.type_acces}}</a></li>
                {%endfor%}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>